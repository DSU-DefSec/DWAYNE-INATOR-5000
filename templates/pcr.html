{{ template "head.html" . }}

<br>
<h2>Password Change Requests</h2>

{{ $m := .m }}

<br>
{{ template "error.html" .error }}
{{ template "message.html" .message }}
<form style="width: 100%;" method="POST">
    {{ if .admin }}
    <label>Team:
        <select name="team">
            {{ range $team := .m.Team }}
            <option value="{{ $m.GetIdentifier .Name }}">{{ .Name }}</option>
            {{ end }}
        </select>
    </label>
    {{ end }}
    <label>Check:
        <select name="check">
            {{ range $box := .m.Box }}
            {{ range $check := .CheckList }}
            {{ if not .Anonymous }}
            <option value="{{ $check.Name }}">{{ $check.Name }}</option>
            {{ end }}
            {{ end }}
            {{ end }}
        </select>
    </label>
    <br><br>
    <textarea name="pcr" placeholder="username:password"></textarea>
    <input style="display: block; margin: 0 auto;" type="submit" value="Submit PCR"/>
</form>



{{ $admin := .admin }}
{{ $loc := .loc }}

<br>
<br>
<br>
<h2>Services Last Updated</h2>

<br>
<table>
    {{ if .admin }}
    <th>Team</th>
    {{ end }}
    <th>Time</th>
    <th>Service</th>
    {{ if or $m.Verbose .admin }}
    <th>Creds</th>
    {{ end }}
    {{ range $index, $pcr := .pcrs }}
    <tr>
        {{ if $admin }}
        <td class="teamname">
            {{ $pcr.Team }}
        </td>
        {{ end }}
        <td>
            {{ ($pcr.Time.In $loc).Format "03:04:05 PM" }}
        </td>
        <td>
            {{ $pcr.Check }}
        </td>
        {{ if or $m.Verbose $admin }}
        <td>
            {{ range $user, $pass := $pcr.Creds }}
                {{ $user }}:{{ $pass }}
                <br>
            {{ end }}
        </td>
        {{ end }}
    </tr>
    {{ end }}
</table>

<br>
<br>
<h2>Quick Tutorial</h2>
<br>

This is where you can change the passwords that the engine uses to log into your services. If I wanted to change <b>joe</b> and <b>charlie</b>'s passswords for whichever service is currently selected, I would input something like:

<blockquote>
joe:Password2@<br>
charlie:Password3#
</blockquote>

If I wanted to change all the user's passwords (for one service) at a time, I can use <b>all</b>:

<blockquote>
all:CoolPassword!
</blockquote>

Any new passwords input will overwrite previous passwords for a service. If you input an invalid username, the webpage will let you know. Input newlines and blanks do nothing.
<br>
<br>

{{ template "feet.html" }}
